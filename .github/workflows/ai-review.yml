name: åƒé—®ä»£ç è‡ªåŠ¨è¯„å®¡
on:
  pull_request:
    types: [opened, synchronize, reopened]
  push:
    branches: [main, master, develop]

# å…³é”®ï¼šé…ç½®è¶³å¤Ÿçš„æƒé™
permissions:
  pull-requests: write  # å…è®¸è¯„è®ºPR
  contents: read        # å…è®¸è¯»å–ä»£ç Diff
  statuses: write       # å¯é€‰ï¼šå¦‚éœ€æ›´æ–°CommitçŠ¶æ€

jobs:
  code-review:
    runs-on: ubuntu-latest
    steps:
      - name: æ£€å‡ºä»£ç 
        uses: actions/checkout@v4

      # ä½¿ç”¨è‡ªå®šä¹‰çš„åƒé—®Code Review Action
      - name: åƒé—®ä»£ç è¯„å®¡
        uses: imxty/qw-codereview@v1  # å¦‚æœä½ å°†Actionå‘å¸ƒåˆ°GitHub Marketplaceï¼Œæ›¿æ¢ä¸ºï¼šusername/qianwen-code-review-action@v1
        with:
          qianwen-api-key: ${{ secrets.QIANWEN_API_KEY }}  # åƒé—®API Keyï¼ˆéœ€åœ¨ä»“åº“Secretsä¸­é…ç½®ï¼‰
          qianwen-model: qwen-turbo  # å¯é€‰ï¼šqwen-plus/qwen-max
          review-comment-title: ğŸ¤– åƒé—®ä»£ç è¯„å®¡æ„è§
          github-token: ${{ secrets.GITHUB_TOKEN }}  # é»˜è®¤ä»¤ç‰Œï¼ˆå·²é…ç½®æƒé™ï¼‰